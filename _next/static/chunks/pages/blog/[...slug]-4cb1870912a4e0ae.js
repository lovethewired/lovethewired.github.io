(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{96082:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/[...slug]",function(){return t(53832)}])},53832:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return V},default:function(){return W}});var r=t(85893),a=t(99646),s=t(72355),i=t(75532),c=t(84283),l=t(87690),o=t(86828),u=t(16605),d=t(41664);function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){m(e,n,t[n])}))}return e}function f(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function x(e){var n=e.children,t=e.trusted,i=f(e,["children","trusted"]);return(0,r.jsx)(a.D,h({remarkPlugins:[s.Z],rehypePlugins:t?[o.Z]:[],components:{h1:"h2",h2:"h3",code:function(e){return(0,r.jsx)(b,h({trusted:t},e))},a:function(e){var n=e.href,t=e.children,a=(e.node,f(e,["href","children","node"]));return/^https\:\/\//.test(n)?(0,r.jsx)(u.dL,h({href:n},a,{children:t})):(0,r.jsx)(d.default,h({href:n},a,{children:(0,r.jsx)("a",{children:t})}))}}},i,{children:n}))}function v(e){var n=e.linesHl,t=e.linesAdd,r=e.linesDel;return function(e){var a=e.rows,s=e.stylesheet,i=e.useInlineStyles;return a.map((function(e,a){return n&&n.includes(a)?e.properties.className=["line line-hl"]:t&&t.includes(a)?e.properties.className=["line line-add"]:r&&r.includes(a)?e.properties.className=["line line-del"]:e.properties.className=[],(0,l.ZP)({node:e,stylesheet:s,useInlineStyles:i,key:"code-segement".concat(a)})}))}}var p=/\/\/\s*(highlight|add|delete)-line$/gm,y=/\/\/\s*highlight-line$/,g=/\/\/\s*delete-line$/,j=/\/\/\s*add-line$/;function b(e){e.node;var n,t,a=e.inline,s=e.trusted,l=e.className,o=e.children,u=f(e,["node","inline","trusted","className","children"]),d=null===(n=/language-(?:diff-)*(.+)\b/.exec(l||""))||void 0===n?void 0:n[1],m=null===(t=/\b(\w+)\b$/.exec(l||""))||void 0===t?void 0:t[1];if(!m||a)return(0,r.jsx)("code",h({className:l},u,{children:o}));var x=d!==m?d:"",b=String(o).replace(/\n$/,""),N=[],w=[],C=[];return s&&(b.split("\n").forEach((function(e,n){y.test(e)?N.push(n):g.test(e)?C.push(n):j.test(e)&&w.push(n)})),b=b.replaceAll(p,"")),(0,r.jsx)(i.Z,h({language:m,style:c.YC,before:x,codeTagProps:{style:[]},wrapLines:!0,renderer:v({linesHl:N,linesAdd:w,linesDel:C}),className:""},u,{children:b}))}var N=t(67294),w=t(94184),C=t.n(w),O=t(38197),k=t(84243),S=t(34051),P=t.n(S),D=t(31838),I=t(31062);function E(e,n,t,r,a,s,i){try{var c=e[s](i),l=c.value}catch(o){return void t(o)}c.done?n(l):Promise.resolve(l).then(r,a)}function M(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var s=e.apply(n,t);function i(e){E(s,r,a,i,c,"next",e)}function c(e){E(s,r,a,i,c,"throw",e)}i(void 0)}))}}var _=D.v.soldisc.chainId;function A(e){var n=(0,I.GP)().soldisc,t=(0,u.HM)(),r="PostQuery"+e,a=function(){var r=M(P().mark((function r(){var a;return P().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getCommentsByPost(e,t);case 2:return a=r.sent,r.abrupt("return",{comments:a});case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return e?(0,I.LQ)({key:r,fetchState:a,chainId:_}):[]}var L=t(57458),T=t.n(L),G=t(67814),H=t(56024),$=t(51436);function Q(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function z(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){z(e,n,t[n])}))}return e}function Z(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function B(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,s=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(s.push(r.value),!n||s.length!==n);i=!0);}catch(l){c=!0,a=l}finally{try{i||null==t.return||t.return()}finally{if(c)throw a}}return s}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Q(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=D.v.soldisc.chainId;function F(e){e.value;var n=e.children,t=Z(e,["value","children"]);return(0,r.jsx)("div",{className:"break-words",children:(0,r.jsx)(x,U({},t,{children:n}))})}function R(e){var n=e.address,t=e.userName,a=e.setModalData;return(0,r.jsx)("span",{className:"text-primary-400 link",onClick:function(){return a({address:n,userName:t})},children:t})}function Y(e){var n,t=e.postHash,a=e.commentId,s=e.user,i=e.userName,c=e.text,l=e.creationDate,o=e.editDate,d=e.numLikes,m=e.liked,h=e.setModalData,f=(0,u.HM)(),x=(0,u.yw)(),v=(0,u.pC)(),p=null===x||void 0===x?void 0:x.getSigner(),y=(0,I.GP)(),g=y.soldisc,j=y.handleTx,b=y.handleTxError,w=(0,N.useState)(!1),O=w[0],k=w[1],S=(0,N.useState)(""),P=S[0],D=S[1],E=v===X&&f,M=B(A(t),2)[1],_=f===s;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-baseline gap-x-4 text-slate-400",children:[(0,r.jsx)(R,{address:s,userName:i,setModalData:h}),(0,r.jsx)("span",{className:"text-sm hidden sm:block",children:new Date(l.mul(1e3).toNumber()).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),(0,r.jsxs)("span",{className:C()("text-sm",0==d&&"text-slate-500"),children:[d.toString(),(0,r.jsx)(G.G,{className:C()("ml-2 text-base transition-colors duration-200 cursor-pointer",m?"text-secondary-400 hover:text-slate-300":"text-slate-400 hover:text-secondary-400"),onClick:(n=function(){t&&g.connect(p).toggleLikeComment(t,a).then(j).then(M).catch(b)},E?n:function(){return u.i8.activate(X)}),icon:m?$.m6i:H.m6i})]}),o>0&&(0,r.jsxs)("span",{className:"text-sm text-slate-500 hidden sm:block",children:["(edited:"," ",new Date(o.mul(1e3).toNumber()).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),")"]})]}),O?(0,r.jsx)(q,{value:P,onChange:function(e){return D(e.target.value)},onClick:function(e){t&&g.connect(p).editComment(t,a,e).then(j).then((function(){return k(!1)})).then(M).catch(b)},onCancel:function(){return k(!1)}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F,{children:c}),_&&t&&(0,r.jsx)("div",{className:"flex justify-center text-xs",children:(0,r.jsx)(u.zx,{className:"",variant:"text",onClick:function(){D(c),k(!0)},children:"Edit"})})]})]})}function q(e){var n,t,a=e.value,s=e.onClick,i=e.onChange,c=e.onCancel,l=e.placeholder,o=e.text,d=e.loadingText,m=(e.children,(0,N.useState)(!1)),h=m[0],f=m[1],x=T().encode(a),v=4<x.length&&x.length<1e3,p=(0,u.HM)(),y=(0,u.pC)()===X&&p;return(0,r.jsxs)("div",{children:[(0,r.jsx)(u.II,{className:"mt-2",variant:"outlined",type:"multiline",placeholder:l,invalid:a&&!v,value:a,onChange:i}),a&&(0,r.jsx)("p",{className:"text-slate-400 my-2",children:"Preview:"}),(0,r.jsx)(F,{children:T().decode(x)}),(0,r.jsxs)("div",{className:"flex justify-center p-2",children:[c&&!h&&(0,r.jsx)(u.zx,{variant:"text",onClick:c,children:"Cancel"}),(0,r.jsx)(u.fl,{loading:h,disabled:!v,className:"",variant:"text",onClick:(t=s,y?function(){f(!0),t(x).finally((function(){return f(!1)}))}:function(){return u.i8.activate(X)}),children:h?null!==(n=o&&d)&&void 0!==n?n:"Editing":null!==o&&void 0!==o?o:"Edit"})]})]})}function J(e){var n=e.userName,t=e.address,a=e.setModalData,s=B(function(e){var n=(0,I.GP)().soldisc,t="UserCommentQuery"+e,r=function(){var t=M(P().mark((function t(){var r;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getCommentsByUser(e);case 2:return r=t.sent,t.abrupt("return",{comments:r});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,I.LQ)({key:t,fetchState:r,chainId:_})}(t),1),i=s[0],c=i.comments,l=i.loaded,o=(0,u.pC)();return(0,r.jsx)(u.u_,{open:!!t,onClose:function(){return a({})},children:(0,r.jsxs)("div",{className:"bg-slate-900 flex flex-col p-8 max-w-xl",children:[(0,r.jsxs)("div",{className:"flex items-end gap-x-3",children:[(0,r.jsx)(u.dL,{href:(0,u.st)(t,o),children:(0,r.jsx)("h2",{className:"btn",children:n})}),(0,r.jsx)(u.dL,{href:(0,u.st)(t,o),children:(0,r.jsx)("span",{className:"",children:t})})]}),(0,r.jsx)("div",{className:"mt-4",children:l&&c.map((function(e,n){return(0,r.jsx)(Y,U({commentId:n,setModalData:a},e),n)})).reverse()})]})})}function K(e){var n=e.slug,t=(0,N.useState)({}),a=t[0],s=t[1],i=(0,N.useState)(""),c=i[0],l=i[1],o=(0,N.useState)(""),d=o[0],m=o[1],h=(0,u.HM)(),f=(0,u.yw)(),x=(0,u.pC)(),v=null===f||void 0===f?void 0:f.getSigner(),p=(0,I.GP)(),y=p.soldisc,g=p.handleTx,j=p.handleTxError,b=n.join("/");"2022/soldisc"===b&&(b="2021/soldisc");var w=O.w(k.$.encode(["string"],[b])),C=B(function(e){var n=(0,I.GP)().soldisc,t=function(){var t=M(P().mark((function t(){var r;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.accounts(e);case 2:return r=t.sent,t.abrupt("return",{userAccount:r});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,I.LQ)({key:"UserQuery",fetchState:t,chainId:_})}(h),2),S=C[0].userAccount,D=C[1],E=B(A(w),2),L=E[0],G=L.comments,H=L.loaded,$=E[1],Q=x===X&&h,z=(null===S||void 0===S?void 0:S.creationDate)>0;return(0,N.useEffect)((function(){u.i8.connectEagerly()}),[]),(0,r.jsxs)("div",{className:"soldisc bg-slate-800/40 text-slate-300 -mx-4 px-4 p-4 rounded-xl border border-white/20",children:[a.address&&(0,r.jsx)(J,U({},a,{setModalData:s})),(0,r.jsxs)("div",{className:"text-lg py-2",children:[(0,r.jsx)("span",{className:"font-display bg-gradient-to-r from-primary-400 to-secondary-500 bg-clip-text text-transparent",children:"SolDisc"})," ",(0,r.jsx)("span",{className:"text-sm text-slate-400 ml-1",children:"- On-Chain Discourse"})]}),H?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"border-y border-white/40 pt-3 mb-4",children:[(0,r.jsx)("p",{className:"text-slate-400 text-sm",children:"Leave a comment:"}),z?(0,r.jsx)(R,{address:h,userName:S.name,setModalData:s}):(0,r.jsx)("div",{children:(0,r.jsx)(u.II,{className:"mt-2",variant:"outlined",placeholder:"username",value:d,invalid:d&&!(4<=d.length&&d.length<=20),onChange:function(e){return m(e.target.value)}})}),(0,r.jsx)(q,{value:c,onChange:function(e){return l(e.target.value)},placeholder:z?"":"comment",onClick:function(){return(z?y.connect(v).commentOnPost(w,T().encode(c)):y.connect(v).createAccountAndComment(d,"",w,T().encode(c))).then(g).then(D).then($).then((function(){return l("")})).catch(j)},text:z?"Comment":"Create Account & Comment",loadingText:z?"Commenting":"Creating Account & Commenting"})]}),(null===G||void 0===G?void 0:G.length)<1&&(0,r.jsx)("p",{children:"No Comments yet"}),(0,r.jsx)("div",{className:"flex flex-col gap-y-4",children:H&&G.map((function(e,n){return(0,r.jsx)(Y,U({postHash:w,commentId:n,setModalData:s},e),n)})).reverse()})]}):(0,r.jsx)("div",{className:"flex justify-center m-4",children:Q?"loading...":(0,r.jsx)(u.zx,{variant:"text",onClick:function(){!window.ethereum&&isMobile()?connectMetamaskMobile():u.i8.activate(X)},children:x!==X?"Connect to ".concat(u.zG[X].name):"Connect your MetaMask!"})})]})}var V=!0;function W(e){var n=e.postData;return(0,r.jsxs)("div",{className:"flex flex-col justify-between gap-y-20",children:[(0,r.jsxs)("div",{className:"content markdown",children:[(0,r.jsx)("h1",{className:"text-center",children:n.title}),n.suptitle&&(0,r.jsx)("h2",{className:"text-center",children:n.suptitle}),(0,r.jsx)("p",{className:"text-slate-500 text-sm text-center",children:new Date(n.date).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),(0,r.jsx)(x,{className:"mt-16",trusted:!0,children:n.contentRaw})]}),(0,r.jsx)(K,{slug:n.slug})]})}}},function(e){e.O(0,[905,774,888,179],(function(){return n=96082,e(e.s=n);var n}));var n=e.O();_N_E=n}]);