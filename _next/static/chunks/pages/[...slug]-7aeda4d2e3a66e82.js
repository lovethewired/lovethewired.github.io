(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{84459:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[...slug]",function(){return t(87941)}])},87941:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return ne},default:function(){return te}});var r=t(85893),s=t(11163),i=t(82960),a=t(97e3),l=t(75532),o=t(84283),c=t(87690),d=t(26802),u=t(38522),h=t(68141),m=t(491),f=t(34699),x=t(52935),v=t(31947),p=t(71015),g=t(41664);t(97604);function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){y(e,n,t[n])}))}return e}function j(e,n){if(null==e)return{};var t,r,s=function(e,n){if(null==e)return{};var t,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var N=[["# Audit Findings Classifications","\n# Audit Findings Classifications\n\n## Threat-Levels\n\n| Threat-Level |                                                                                       Description                                                                                        |\n| :----------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |\n|    Minor     |                               Includes optimizations, best practices, readability or misused semantics. Issues can be addressed using one's own judgement.                               |\n|    Medium    |                                 Includes oversights, potentially faulty logic.  These issues should be addressed unless there is a clear reason not to.                                  |\n|    Major     | Includes security vulnerabilities that can lead to damages or loss of user funds. These may not be directly exploitable or require certain conditions. These issues should be addressed. |\n|   Critical   |                       Critical findings can affect the funds of a large number of users and be very bad for a client's reputation. These issues need to be fixed.                        |\n\n## Categories\n\n|  Category   |                  Description                   |\n| :---------: | :--------------------------------------------: |\n| :sparkles:  | Readability, best practices, misused semantics |\n|  :recycle:  | Optimizations, suggestions for code refactors  |\n|    :zap:    |            Error / Logical mistake             |\n| :collision: |    Unauthorized access / Exploitable funds     |\n"],["# Audit Disclaimer",'\n# Disclaimer\n\nA contract audit is _not_ a security guarantee of "bug-free" code.\nThe audit is a best-effort endeavour operating within reasonable constraints\nof time, understanding, expertise and decidability.\nThe significance of this report must be understood \nin this context and given the outlined scope of the assignment.\nI shall not be held liable for any future damages.\n']];function C(e){var n=e.children,t=e.trusted,s=j(e,["children","trusted"]);if(t){var l=!0,o=!1,c=void 0;try{for(var y,C=N[Symbol.iterator]();!(l=(y=C.next()).done);l=!0){var w=y.value;n=n.replaceAll(w[0],w[1])}}catch(O){o=!0,c=O}finally{try{l||null==C.return||C.return()}finally{if(o)throw c}}}return(0,r.jsx)(i.D,b({remarkPlugins:t?[a.Z,u.Z,d.Z]:[a.Z],rehypePlugins:t?[h.Z,m.Z,f.Z,x.Z,v.Z]:[],components:{h1:"h2",h2:function(e){var n=e.children,t=j(e,["children"]);return(0,r.jsx)("h3",{id:t.id,children:n})},code:function(e){return(0,r.jsx)(I,b({trusted:t},e))},a:function(e){var n=e.href,t=e.children,s=(e.node,j(e,["href","children","node"]));return/^https\:\/\//.test(n)?(0,r.jsx)(p.dL,b({href:n},s,{children:t})):(0,r.jsx)(g.default,b({href:n},s,{children:(0,r.jsx)("a",{children:t})}))}}},s,{children:n}))}function w(e){var n=e.linesHl,t=e.linesAdd,r=e.linesDel;return function(e){var s=e.rows,i=e.stylesheet,a=e.useInlineStyles;return s.map((function(e,s){return n&&n.includes(s)?e.properties.className=["line line-hl"]:t&&t.includes(s)?e.properties.className=["line line-add"]:r&&r.includes(s)?e.properties.className=["line line-del"]:e.properties.className=[],(0,c.ZP)({node:e,stylesheet:i,useInlineStyles:a,key:"code-segment".concat(s)})}))}}var O=/\/\/\s*(hl|highlight|add|delete|del|remove)-line$/gm,S=/\/\/\s*(hl|highlight)-line$/,k=/\/\/\s*(del|delete|remove)-line$/,D=/\/\/\s*add-line$/;function I(e){e.node;var n,t,s=e.inline,i=e.trusted,a=e.className,c=e.children,d=j(e,["node","inline","trusted","className","children"]),u=null===(n=/language-(?:diff-)*(.+)\b/.exec(a||""))||void 0===n?void 0:n[1],h=null===(t=/\b(\w+)\b$/.exec(a||""))||void 0===t?void 0:t[1];if(!h||s)return(0,r.jsx)("code",b({className:a},d,{children:c}));var m=u!==h?u:"",f=String(c).replace(/\n$/,""),x=[],v=[],p=[];return i&&(f.split("\n").forEach((function(e,n){S.test(e)?x.push(n):k.test(e)?p.push(n):D.test(e)&&v.push(n)})),f=f.replaceAll(O,"")),(0,r.jsx)(l.Z,b({language:h,style:o.YC,before:m,codeTagProps:{style:[]},wrapLines:!0,renderer:w({linesHl:x,linesAdd:v,linesDel:p}),className:""},d,{children:f}))}var P=t(67294),T=t(94184),A=t.n(T),E=t(38197),_=t(69820),L=t(57458),M=t.n(L),Z=t(67814),z=t(56024),$=t(51436),G=t(31838),H=t(87282);function q(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function F(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){F(e,n,t[n])}))}return e}function R(e,n){if(null==e)return{};var t,r,s=function(e,n){if(null==e)return{};var t,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}function U(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,s,i=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(o){l=!0,s=o}finally{try{a||null==t.return||t.return()}finally{if(l)throw s}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return q(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return q(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B=G.v.soldisc.chainId;function X(e){var n=(0,p.ti)();return(0,H.LQ)(G.v.soldisc.address,"getCommentsByPost",[e,n])}function Y(e){e.value;var n=e.children,t=R(e,["value","children"]);return(0,r.jsx)("div",{className:"break-words",children:(0,r.jsx)(C,Q({},t,{children:n}))})}function J(e){var n=e.address,t=e.userName,s=e.setModalData;return(0,r.jsx)("span",{className:"text-primary-400 link",onClick:function(){return s({address:n,userName:t})},children:t})}function K(e){var n=e.postHash,t=e.commentId,s=e.user,i=e.userName,a=e.text,l=e.creationDate,o=e.editDate,c=e.numLikes,d=e.liked,u=e.setModalData,h=(0,p.ti)(),m=(0,p.Mu)(),f=null===m||void 0===m?void 0:m.getSigner(),x=(0,H.GP)(),v=x.soldisc,g=x.handleTx,y=x.handleTxError,b=(0,P.useState)(!1),j=b[0],N=b[1],C=(0,P.useState)(""),w=C[0],O=C[1],S=U(X(n),2)[1],k=h===s,D=(0,p.xh)(G.v.soldisc.chainId);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-baseline gap-x-4 text-slate-400",children:[(0,r.jsx)(J,{address:s,userName:i,setModalData:u}),(0,r.jsx)("span",{className:"text-sm hidden sm:block",children:new Date(l.mul(1e3).toNumber()).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),(0,r.jsxs)("span",{className:A()("text-sm",0==c&&"text-slate-500"),children:[c.toString(),(0,r.jsx)(Z.G,{className:A()("ml-2 text-base transition-colors duration-200 cursor-pointer",d?"text-secondary-400 hover:text-slate-300":"text-slate-400 hover:text-secondary-400"),onClick:D((function(){n&&v.connect(f).toggleLikeComment(n,t).then(g).then(S).catch(y)})),icon:d?$.m6i:z.m6i})]}),o>0&&(0,r.jsxs)("span",{className:"text-sm text-slate-500 hidden sm:block",children:["(edited:"," ",new Date(o.mul(1e3).toNumber()).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),")"]})]}),j?(0,r.jsx)(V,{value:w,onChange:function(e){return O(e.target.value)},onClick:function(e){n&&v.connect(f).editComment(n,t,e).then(g).then((function(){return N(!1)})).then(S).catch(y)},onCancel:function(){return N(!1)}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y,{children:a}),k&&n&&(0,r.jsx)("div",{className:"flex justify-center text-xs",children:(0,r.jsx)(p.zx,{className:"",variant:"text",onClick:function(){O(a),N(!0)},children:"Edit"})})]})]})}function V(e){var n,t=e.value,s=e.onClick,i=e.onChange,a=e.onCancel,l=e.placeholder,o=e.text,c=e.loadingText,d=(e.children,(0,P.useState)(!1)),u=d[0],h=d[1],m=M().encode(t),f=4<m.length&&m.length<1e3,x=(0,p.xh)(G.v.soldisc.chainId);return(0,r.jsxs)("div",{children:[(0,r.jsx)(p.II,{className:"mt-2",variant:"outlined",type:"multiline",placeholder:l,invalid:t&&!f,value:t,onChange:i}),t&&(0,r.jsx)("p",{className:"text-slate-400 my-2",children:"Preview:"}),(0,r.jsx)(Y,{children:M().decode(m)}),(0,r.jsxs)("div",{className:"flex justify-center p-2",children:[a&&!u&&(0,r.jsx)(p.zx,{variant:"text",onClick:a,children:"Cancel"}),(0,r.jsx)(p.fl,{loading:u,disabled:!f,className:"",variant:"text",onClick:x((function(){h(!0),s(m).finally((function(){return h(!1)}))})),children:u?null!==(n=o&&c)&&void 0!==n?n:"Editing":null!==o&&void 0!==o?o:"Edit"})]})]})}function W(e){var n,t=e.userName,s=e.address,i=e.setModalData,a=U((n=s,(0,H.LQ)(G.v.soldisc.address,"getCommentsByUser",[n])),1)[0],l=(0,p.pN)();return(0,r.jsx)(p.u_,{open:!!s,onClose:function(){return i({})},children:(0,r.jsxs)("div",{className:"bg-slate-900 flex flex-col p-8 max-w-xl",children:[(0,r.jsxs)("div",{className:"flex items-end gap-x-3",children:[(0,r.jsx)(p.dL,{href:(0,p.st)(l,s),children:(0,r.jsx)("h2",{className:"btn",children:t})}),(0,r.jsx)(p.dL,{href:(0,p.st)(l,s),children:(0,r.jsx)("span",{className:"",children:s})})]}),(0,r.jsx)("div",{className:"mt-4",children:void 0!==a&&a.map((function(e,n){return(0,r.jsx)(K,Q({commentId:n,setModalData:i},e),n)})).reverse()})]})})}function ee(e){var n=e.slug,t=(0,P.useState)({}),s=t[0],i=t[1],a=(0,P.useState)(""),l=a[0],o=a[1],c=(0,P.useState)(""),d=c[0],u=c[1],h=(0,p.ti)(),m=(0,p.Mu)(),f=(0,p.pN)(),x=null===m||void 0===m?void 0:m.getSigner(),v=(0,H.GP)(),g=v.soldisc,y=v.handleTx,b=v.handleTxError,j=n.join("/");"blog/2022/soldisc"===j&&(j="2021/soldisc");var N=E.w(_.$.encode(["string"],[j])),C=U(function(e){return(0,H.LQ)(G.v.soldisc.address,"accounts",[e])}(h),2),w=C[0],O=C[1],S=U(X(N),2),k=S[0],D=S[1],I=void 0!==k,T=f===B&&h,A=(null===w||void 0===w?void 0:w.creationDate)>0;return(0,r.jsxs)("div",{className:"soldisc bg-slate-800/40 text-slate-300 -mx-4 px-4 p-4 rounded-xl border border-white/20",children:[s.address&&(0,r.jsx)(W,Q({},s,{setModalData:i})),(0,r.jsxs)("div",{className:"text-lg py-2",children:[(0,r.jsx)("span",{className:"font-display bg-gradient-to-r from-primary-400 to-secondary-500 bg-clip-text text-transparent",children:"SolDisc"})," ",(0,r.jsx)("span",{className:"text-sm text-slate-400 ml-1",children:"- On-Chain Discourse"})]}),T&&!I?(0,r.jsx)("div",{className:"flex justify-center m-4",children:"loading..."}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"border-y border-white/40 pt-3 mb-4",children:[(0,r.jsx)("p",{className:"text-slate-400 text-sm",children:"Leave a comment:"}),A?(0,r.jsx)(J,{address:h,userName:w.name,setModalData:i}):(0,r.jsx)("div",{children:(0,r.jsx)(p.II,{className:"mt-2",variant:"outlined",placeholder:"username",value:d,invalid:d&&!(4<=d.length&&d.length<=20),onChange:function(e){return u(e.target.value)}})}),T?(0,r.jsx)(V,{value:l,onChange:function(e){return o(e.target.value)},placeholder:A?"":"comment",onClick:function(){return(A?g.connect(x).commentOnPost(N,M().encode(l)):g.connect(x).createAccountAndComment(d,"",N,M().encode(l))).then(y).then(O).then(D).then((function(){return o("")})).catch(b)},text:A?"Comment":"Create Account & Comment",loadingText:A?"Commenting":"Creating Account & Commenting"}):(0,r.jsx)("div",{className:"flex justify-center m-4",children:f!==B?(0,r.jsx)(p.zx,{variant:"text",onClick:function(){!window.ethereum&&(0,p.tq)()?(0,p.Dy)():p.i8.activate(B)},children:"Connect to ".concat(p.zG[B].name)}):(0,r.jsx)(p.TI,{chainId:G.v.soldisc.chainId})})]}),!((null===k||void 0===k?void 0:k.length)>=1)&&(0,r.jsx)("p",{className:"text-center my-8",children:"No Comments yet"}),(0,r.jsx)("div",{className:"flex flex-col gap-y-4",children:I&&k&&k.map((function(e,n){return(0,r.jsx)(K,Q({postHash:N,commentId:n,setModalData:i},e),n)})).reverse()})]})]})}var ne=!0;function te(e){var n=e.postData,t=(0,s.useRouter)().query.slug.includes("blog");return(0,r.jsxs)("div",{className:"flex flex-col justify-between gap-y-20",children:[(0,r.jsxs)("div",{className:"content markdown",children:[(0,r.jsx)("h1",{className:"text-center",children:n.title}),n.suptitle&&(0,r.jsx)("h2",{className:"text-center",children:n.suptitle}),(0,r.jsx)("p",{className:"text-slate-500 text-sm text-center",children:n.date}),(0,r.jsx)(C,{className:"mt-16",trusted:!0,children:n.contentRaw})]}),t&&(0,r.jsx)(ee,{slug:n.slug})]})}}},function(e){e.O(0,[265,634,774,888,179],(function(){return n=84459,e(e.s=n);var n}));var n=e.O();_N_E=n}]);