(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{82050:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/enc-message",function(){return n(39697)}])},39697:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j},Encrypt:function(){return N},Decrypt:function(){return S}});var r=n(34051),a=n.n(r),u=n(85893),c=n(67294),s=n(39505),i=n(16441),l=n(59567),o=n(29251),f=n(11163),y=n(67814),p=n(51436),v=n(48764).Buffer;function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,a,u,c){try{var s=e[u](c),i=s.value}catch(l){return void n(l)}s.done?t(i):Promise.resolve(i).then(r,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var u=e.apply(t,n);function c(e){d(u,r,a,c,s,"next",e)}function s(e){d(u,r,a,c,s,"throw",e)}c(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,u=[],c=!0,s=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(u.push(r.value),!t||u.length!==t);c=!0);}catch(i){s=!0,a=i}finally{try{c||null==n.return||n.return()}finally{if(s)throw a}}return u}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=n(51091),b=function(e){if(!e.startsWith("0x"))try{return i.Dv(l.J(e))}catch(t){console.error(t.message)}return e};function j(){return(0,u.jsxs)("div",{className:"content",children:[(0,u.jsx)(N,{}),(0,u.jsx)(S,{})]})}function N(){var e=(0,f.useRouter)(),t=(0,s.ti)(),n=(0,s.Mu)(),r=(0,c.useState)(""),o=r[0],h=r[1],d=(0,c.useState)(""),j=d[0],N=d[1],S=(0,c.useState)(""),w=S[0],E=S[1],I=(0,c.useState)(""),M=I[0],_=I[1];(0,c.useEffect)((function(){e.query.msg&&_(e.query.msg),e.query.encMsg&&N(b(e.query.encMsg)),e.query.encPubKey&&h(e.query.encPubKey)}),[e.query]);var q=function(){var e=x(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M&&o){e.next=4;break}return E(""),N(""),e.abrupt("return");case 4:try{t=i.Dv(v.from(JSON.stringify(g.encryptSafely({publicKey:l.c(o),data:M,version:"x25519-xsalsa20-poly1305"})),"utf8")),N(t),E("")}catch(n){N(""),E(n.message)}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){return q()}),[M,o]);var C=j?{encMsg:l.c(j),encPubKey:o}:{msg:M};return(0,u.jsxs)("div",{className:"mt-4 text-slate-300 space-y-2",children:[(0,u.jsx)("h1",{className:"text-center mb-12",children:"Encrypt Message"}),(0,u.jsx)(s.II,{label:"Public Key",value:o,onChange:function(e){return h(e.target.value)},children:(0,u.jsx)(s.zx,{onClick:function(){n.send("eth_getEncryptionPublicKey",[t]).then((function(e){return h(i.Dv(l.J(e)))}))},children:"Request"})}),(0,u.jsx)(s.II,{label:"Message",spellCheck:!1,inputClassName:"overflow-scroll resize-y",value:M,onChange:function(e){return _(e.target.value)},type:"multiline"}),(0,u.jsx)(s.II,{label:"Encrypted Message",value:j,children:(0,u.jsx)(s.zx,{variant:"text",className:"py-1",disabled:!j&&!M,children:(0,u.jsx)(s.dL,{href:e.pathname+"?"+Object.entries(C).map((function(e){var t=m(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&"),children:(0,u.jsx)(y.G,{className:"fa-thin",icon:p.Xjp})})})}),w&&(0,u.jsx)("p",{className:"text-red-400",children:w})]})}function S(){var e=(0,f.useRouter)(),t=(0,s.ti)(),n=(0,s.Mu)(),r=(0,c.useState)(""),i=r[0],l=r[1],y=(0,c.useState)(""),p=y[0],v=y[1],h=(0,c.useState)(""),d=h[0],m=h[1],j=(0,c.useState)(""),N=j[0],S=j[1];(0,c.useEffect)((function(){e.query.encMsg&&v(b(e.query.encMsg)),e.query.decPrivKey&&m(e.query.decPrivKey)}),[e.query]);var w=function(){var e=x(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&d)try{t=g.decryptSafely({privateKey:(n=d,n.replace("0x","")),encryptedData:JSON.parse(o.ZN(p))}),S(t),l("")}catch(r){S(""),l(r.message)}else S(""),l("");case 1:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){return w()}),[p,d]);return(0,u.jsxs)("div",{className:"mt-4 text-slate-300 space-y-2",children:[(0,u.jsx)("h1",{className:"text-center mb-12",children:"Decrypt Message"}),(0,u.jsx)(s.II,{label:"Encrypted Message",spellCheck:!1,value:p,onChange:function(e){return v(e.target.value)}}),(0,u.jsx)(s.II,{label:"Private Key",spellCheck:!1,value:d,onChange:function(e){return m(e.target.value)},children:(0,u.jsx)(s.zx,{onClick:function(){var e;n.send("eth_decrypt",[(e=p,"0x"+e.replace("0x","")),t]).then((function(e){var t;return S(null===(t=JSON.parse(e))||void 0===t?void 0:t.data)})).catch((function(e){return l(e.message)}))},children:"Decrypt"})}),(0,u.jsx)(s.II,{label:"Decrypted Message",value:N}),i&&(0,u.jsx)("p",{className:"text-red-400",children:i})]})}}},function(e){e.O(0,[774,888,179],(function(){return t=82050,e(e.s=t);var t}));var t=e.O();_N_E=t}]);