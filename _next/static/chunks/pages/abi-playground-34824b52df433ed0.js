(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[175],{11954:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/abi-playground",function(){return t(1362)}])},1362:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return k},default:function(){return E}});var r=t(85893),a=t(67294),s=t(16605),l=t(19485),c=t(8198),i=t(64146),o=t(84243),u=t(16441),d=t(61744),f=t(84109),x=t(94184),h=t.n(x),p=t(67814),m=t(51436),v=t(56024),g=t(41664);function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){y(e,n,t[n])}))}return e}function b(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,s=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(s.push(r.value),!n||s.length!==n);l=!0);}catch(i){c=!0,a=i}finally{try{l||null==t.return||t.return()}finally{if(c)throw a}}return s}}(e,n)||C(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,n){if(e){if("string"===typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,n):void 0}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=(0,a.useState)(),t=n[0],r=n[1],s=(0,a.useState)(),l=s[0],c=s[1],i=(0,a.useState)(e),o=i[0],u=i[1],d=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;c((function(){return n})),u(t)};return(0,a.useEffect)((function(){return t&&clearTimeout(t),r(setTimeout(l,o)),function(){return clearTimeout(t)}}),[l]),d}var I=function(e){return JSON.stringify(e,null,2)},k=!0;function E(){var e,n=(0,a.useState)(""),t=n[0],o=n[1],u=(0,a.useState)(""),d=u[0],x=u[1],v=(0,a.useState)(""),j=v[0],y=v[1],w=(0,a.useState)(""),C=w[0],k=w[1],E=(0,a.useState)(null),A=E[0],D=E[1],z=(0,a.useState)(null),M=z[0],G=z[1],R=(0,a.useState)({}),L=R[0],F=R[1],B=(0,a.useState)(!0),P=B[0],Y=B[1],H=(0,f.VY)(),J=(0,s.pC)(),V=null===(e=(0,s.yw)())||void 0===e?void 0:e.getSigner(),$=S(1e3),X=S(100),U=(0,s.st)(d,J),Z=(0,s.Gr)(d,J),W=function(e){console.log("calling update LLC",P,L,e),(!P||P&&e.sighash===L.sighash)&&F(e)};(0,a.useEffect)((function(){Y(!0),X((function(){return Y(!1)}))}),[j]),(0,a.useEffect)((function(){try{t&&x(l.getAddress(t))}catch(e){k(O(e))}}),[t]);var q=function(e){k("");try{if(e=function(e){return/^\[.+\]$/.test(e.replaceAll("\n","").trim())?e:e.split("\n").filter((function(e){return e.length>4})).map((function(e){return"function "+e.replace("function ","")}))}(e||j)){var n=new c.vU(e);if(window.interface=n,D(n),d){var t=new i.CH(d,e,V);window.contract=t,G(t)}}else D(null)}catch(r){k(O(r))}},K=function(e){y(e),q(e)};return(0,a.useEffect)((function(){$(q)}),[j,d]),(0,r.jsxs)("div",{className:"content",children:[(0,r.jsxs)("h1",{className:"text-center mb-12",children:["ABI Playground",(0,r.jsxs)("span",{className:"group ml-4 text-lg text-primary-500/30",children:[(0,r.jsx)(p.G,{className:"",icon:m.Fuz}),(0,r.jsx)("div",{className:"hidden group-hover:inline-block absolute",children:(0,r.jsx)(s.zx,{className:"btn-light text-lg group normal-case",variant:"text",onClick:function(){o("0xBB9bc244D798123fDe783fCc1C72d3Bb8C189413"),K("daoCreator() view returns (address)\n\nunblockMe() returns (bool)\n\nsplitDao(uint256 proposalID, address newCurator) payable returns (bool success)\n\nproposals(uint256 id) view returns (address recipient, uint256 amount, string description, uint256 votingDeadline, bool open, bool proposalPassed, bytes32 proposalHash, uint256 proposalDeposit, bool newCurator, uint256 yea, uint256 nay, address creator)"),s.i8.activate(1).then((function(){return H("Make sure not to actually confirm any transactions on Mainnet!")})).then((function(){return H((0,r.jsx)(g.default,{href:"/blog/2022/abi-playground",children:"Read this post for a short guide."}),"info")}))},children:"Try an Example"})})]})]}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 items-start gap-4 text-slate-300",children:[(0,r.jsxs)("div",{className:"sm:order-1",children:[(0,r.jsxs)("div",{className:"flex sm:flex-col-reverse items-end gap-4",children:[(0,r.jsx)(s.II,{label:"Address",value:t,onChange:function(e){return o(e.target.value)},children:(0,r.jsx)(s.zx,{variant:"text",className:"py-1",disabled:!U,children:(0,r.jsx)(s.dL,{href:U,children:(0,r.jsx)(p.G,{className:"fa-thin",icon:m.Xjp})})})}),(0,r.jsx)(s.II,{type:"select",className:"w-fit sm:w-full",label:"ChainId: "+J,value:J,onChange:function(e){return s.i8.activate(Number(e.target.value))},children:Object.entries(s.zG).map((function(e){var n=b(e,2),t=n[0],a=n[1].name;return(0,r.jsx)("option",{value:t,children:a},t)}))})]}),(0,r.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,r.jsx)("span",{className:"text-slate-400 px-2",children:"ABI"}),(0,r.jsxs)(s.zx,{className:h()("px-2",d&&"underline"),variant:"text",disabled:!d||!Z,onClick:function(){fetch(Z).then((function(e){return e.json()})).then((function(e){if(console.log("Fetching from Etherscan",e),1!=e.status)k(e.message);else{var n=I(JSON.parse(e.result));""===n?k("Could not fetch ABI."):K(n)}}))},children:[(0,r.jsx)(p.G,{icon:m.DY})," Fetch"]}),(0,r.jsx)("div",{className:"flex",children:["ERC20","ERC721","ERC115"].map((function(e){return(0,r.jsx)(s.zx,{className:"px-2 py-0 text-sm",variant:"text",onClick:function(){return fetch("/data/".concat(e,"ABI.json")).then((function(e){return e.json()})).then((function(e){var n=I(e);""===n?k("Could not fetch ABI."):K(n)}))},children:e},e)}))})]}),(0,r.jsx)(s.II,{spellCheck:!1,inputClassName:"overflow-scroll resize-y",value:j,onChange:function(e){return y(e.target.value)},type:"multiline"}),(0,r.jsx)("p",{className:"text-red-400 text-xs",children:C&&"Error: "+C})]}),(0,r.jsx)(T,N({className:"sm:row-span-2 order-3 sm:order-2",address:d},L)),(0,r.jsxs)("div",{className:"sm:order-3 sm:col-span-2",children:[(0,r.jsx)("h2",{className:"mb-4",children:"Functions"}),null===A||void 0===A?void 0:A.fragments.filter((function(e){return"function"===e.type})).map((function(e,n){return(0,r.jsx)(_,N({contract:M,iface:A,address:t,updateLLCData:W},e),n)}))]})]})]})}function _(e){var n=e.contract,t=e.iface,l=e.address,c=e.updateLLCData,i=e.name,u=e.inputs,d=e.constant,x=e.outputs,v=e.payable,g=(0,a.useState)([]),j=g[0],y=g[1],N=(0,a.useState)(""),b=N[0],C=N[1],I=(0,a.useState)([]),k=I[0],E=I[1],_=S(0),T=(0,s.HM)(),z=(0,s.yw)(),M=null===z||void 0===z?void 0:z.getSigner(),G=(0,f.VY)(),R=(0,f.mS)(),L=R.handleTx,F=R.handleTxError,B="".concat(i,"(").concat(u.map((function(e){return e.type})),")");(0,a.useEffect)((function(){E([]),C("")}),[JSON.stringify(x)]),(0,a.useEffect)((function(){y([])}),[JSON.stringify(u)]);var P=function(){try{var e=u.map((function(e,n){var t=e.type;return j[n]?o.$.encode([t],[j[n]]):""})),n=t.getSighash(B);c({iface:t,fnId:B,inputs:u,encoded:e,sighash:n,outputs:x})}catch(r){C(O(r))}};(0,a.useEffect)((function(){C(""),_(P)}),[j]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex text-center flex-wrap items-center gap-x-0 sm:gap-x-1 text-slate-500 text-xs sm:text-base",children:[(0,r.jsx)(s.zx,{variant:"text",className:"btn-light",onClick:P,children:(0,r.jsx)(p.G,{icon:m.DY})}),(0,r.jsx)(s.zx,{onClick:function(){var e,t;return T?l?(console.log({fnId:B,contract:n}),void(d?(e=n.connect(M).functions)[B].apply(e,w(j)).then(E).catch(F):(t=n.connect(M).functions)[B].apply(t,w(j)).then(L).catch(F))):G("Must enter an address."):G("Must be connected via MetaMask!")},className:h()("px-0 pr-1 normal-case select-none max-w-[200px] text-ellipsis overflow-auto text-base",v?"text-red-400":d?"":"text-orange-300"),variant:"text",children:i}),(0,r.jsx)("span",{className:"font-thin text-xl",children:"("}),u.length>0&&u.map((function(e,n){var t=e.name,a=e.type;return(0,r.jsx)(s.II,{className:"text-slate-300 align-text-bottom basis-20 sm:basis-36 max-w-[200px] flex-grow leading-5",placeholder:a+(t?" "+t:""),value:j[n],onChange:function(e){return y(D(j,n,e.target.value))},children:"address"===a&&(0,r.jsx)("span",{className:"btn-light w-4 h-4 text-2xl sm:text-3xl ",onClick:function(){return y(D(j,n,T))},children:"*"})},n)})).reduce((function(e,n,t){return[e,(0,r.jsx)("span",{className:"sm:text-xl select-none",children:","},"c"+t),n]})),(0,r.jsx)("span",{className:"font-thin text-xl",children:")"}),x.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.G,{className:"fa-thin mx-2",icon:m.eFW}),x.map((function(e,n){var t=e.name,a=e.type;return(0,r.jsxs)("span",{className:"",children:[t," ",a]},n)})).reduce((function(e,n,t){return[e,(0,r.jsx)("span",{children:", "},"c"+t),n]}))]})]}),x.length>0&&k&&(0,r.jsx)(A,{responseDecoded:k,outputs:x}),(0,r.jsx)("p",{className:"text-red-400 text-xs h-4 overflow-x-scroll whitespace-nowrap",children:b})]})}function A(e){var n=e.responseRaw,t=e.responseDecoded,a=e.outputs,l=(0,s.pC)(),c=function(){var e=(0,f.VY)();return function(n){return navigator.clipboard.writeText(n).then((function(){return e("Copied!","info",1e3)}))}}(),i=(null===a||void 0===a?void 0:a.length)>0&&a.length===(null===t||void 0===t?void 0:t.length);if(!n&&!i)return null;var u=null===n||void 0===n?void 0:n.replace("0x","").match(/.{1,64}/g);return(0,r.jsxs)("div",{className:"text-xs",children:[(0,r.jsxs)("p",{className:"mt-4",children:["Response",!n&&(0,r.jsxs)(s.zx,{className:"normal-case",variant:"text",onClick:function(){return c(o.$.encode(a,t))},children:[(0,r.jsx)(p.G,{className:"fa-thin mx-2",icon:v.kZ_}),"data"]})]}),i&&(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"select-none mr-2 text-right",children:null===a||void 0===a?void 0:a.map((function(e,n){var a=e.type,s=e.name;return(0,r.jsx)("div",{className:"whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-slate-500 hover:text-slate-300 hover:cursor-pointer h-4",onClick:function(){return c(t[n].toString())},children:a+(s?" "+s:"")})},n)}))}),(0,r.jsx)("div",{className:"overflow-scroll whitespace-nowrap",children:t.map((function(e,n){var a=e.type;return(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"block text-slate-300 h-4",children:"address"===a?(0,r.jsx)(s.dL,{className:"underline",href:(0,s.st)(t[n],l),children:t[n].toString()}):t[n].toString()})},n)}))})]}),n&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Raw",(0,r.jsxs)(s.zx,{className:"normal-case",variant:"text",onClick:function(){return c(n)},children:[(0,r.jsx)(p.G,{className:"fa-thin mx-2",icon:v.kZ_}),"data"]})]}),(0,r.jsxs)("div",{className:"flex font-mono",children:[(0,r.jsx)("div",{className:"flex flex-col text-right mr-2",children:u.map((function(e,n){return(0,r.jsx)("span",{onClick:function(){return c(u[n].toString())},className:"text-slate-500 select-none hover:text-slate-300 hover:cursor-pointer",children:n+1},n)}))}),(0,r.jsx)("div",{className:"overflow-scroll font-mono",children:(0,r.jsx)("span",{className:"tabular-nums",children:u.join("\n")||""})})]})]})]})}var O=function(e){return e.message.replace(/, code.*(?=\))/,"")},D=function(e,n,t){var r=w(e);return r[n]=t,r};function T(e){var n,t,l=e.iface,c=e.address,i=e.fnId,o=e.inputs,x=e.outputs,p=e.encoded,m=e.sighash,v=e.className,g=(0,a.useState)(""),j=g[0],y=g[1],N=(0,a.useState)(""),b=N[0],C=N[1],S=(0,a.useState)(""),I=S[0],k=S[1],E=(0,f.mS)(),_=E.handleTx,D=E.handleTxError,T=(0,s.pC)(),z=(0,s.HM)(),M=(0,s.yw)(),G=(0,f.VY)(),R=(0,a.useState)([]),L=R[0],F=R[1],B=(0,a.useState)(""),P=(B[0],B[1]);(0,a.useEffect)((function(){if(m){var e=p.map((function(e){return e.slice(2)})).join("\n");y(m+(e?"\n"+e:""))}}),[p,m]),(0,a.useEffect)((function(){F([]);try{console.log({responseRaw:I,fnId:i,iface:l},I&&i&&l),I&&i&&l&&(console.log("decoding",l.decodeFunctionResult(i,I)),F(l.decodeFunctionResult(i,I)))}catch(e){P(O(e))}}),[i,I,l]);var Y=function(e){if(!z)return G("Must be connected via MetaMask!");var n="call"===e?"eth_call":"eth_sendTransaction",t=j.replaceAll(/\s/g,""),r=b>0?u.Ou(d.fi(b)):"0x0",a=[{from:z,to:c,data:t,value:r},"latest"];console.log(a[0]),"call"===e?M.send(n,a).then((function(e){return console.log("setting res",e),e})).then(k).catch(D):M.send(n,a).then((function(e){M.getTransaction(e).then(_).catch(D)}))};return(0,r.jsxs)("div",{className:h()("flex flex-col",v),children:[(0,r.jsx)("p",{children:"Low-Level Call"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(s.zx,{variant:"text",disabled:!c,onClick:function(){return Y("call")},children:"Call"}),(0,r.jsx)(s.zx,{variant:"text",disabled:!c,onClick:function(){return Y("send")},children:"Send"}),(0,r.jsx)(s.II,{value:b,onChange:function(e){return C(e.target.value)},inputClassName:"text-right",placeholder:"0.0",children:(0,r.jsx)("span",{className:"ml-1 text-slate-500",children:(null===(n=s.zG[T])||void 0===n||null===(t=n.nativeCurrency)||void 0===t?void 0:t.name)||"\u039e"})})]}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("p",{className:"font-bold",children:null!==i&&void 0!==i?i:"Data"}),(0,r.jsxs)("div",{className:"pt-2 text-xs md:text-base flex",children:[m&&(0,r.jsx)("div",{className:"flex flex-col text-right text-slate-400 select-none",children:[{type:"selector"}].concat(w(o)).map((function(e,n){e.name;var t=e.type;return(0,r.jsx)("span",{children:t},n)}))}),(0,r.jsx)(s.II,{type:"multiline",inputClassName:"whitespace-nowrap text-ellipsis overflow-auto pl-2 pb-2 min-h-[94px]",value:j,placeholder:"0x...",onChange:function(e){return y(e.target.value)}})]})]}),(0,r.jsx)(A,{responseRaw:I,responseDecoded:L,outputs:x})]})}}},function(e){e.O(0,[774,888,179],(function(){return n=11954,e(e.s=n);var n}));var n=e.O();_N_E=n}]);