(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{82050:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/enc-message",function(){return n(39697)}])},39697:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w},Encrypt:function(){return S},Decrypt:function(){return N}});var r=n(34051),a=n.n(r),c=n(85893),u=n(67294),s=n(71015),i=n(45703),o=n(37466),l=n(29251),f=n(11163),p=n(67814),y=n(51436),v=(n(41664),n(48764).Buffer);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,a,c,u){try{var s=e[c](u),i=s.value}catch(o){return void n(o)}s.done?t(i):Promise.resolve(i).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function u(e){d(c,r,a,u,s,"next",e)}function s(e){d(c,r,a,u,s,"throw",e)}u(void 0)}))}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],u=!0,s=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);u=!0);}catch(i){s=!0,a=i}finally{try{u||null==n.return||n.return()}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=n(51091);function w(){var e=(0,f.useRouter)().query;return(0,c.jsxs)("div",{className:"content",children:[(0,c.jsx)(S,x({},e)),(0,c.jsx)(N,x({},e))]})}function S(e){var t=(0,f.useRouter)(),n=(0,s.ti)(),r=(0,s.Mu)(),l=(0,u.useState)(""),h=l[0],d=l[1],b=(0,u.useState)(""),x=b[0],w=b[1],S=(0,u.useState)(""),N=S[0],E=S[1],O=(0,u.useState)(""),P=O[0],I=O[1];(0,u.useEffect)((function(){e.msg&&I(e.msg),e.encMsg&&w(e.encMsg),e.encPubKey&&d(e.encPubKey)}),[e]);var M=function(){var e=m(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P&&h){e.next=4;break}return E(""),w(""),e.abrupt("return");case 4:try{t=i.Dv(v.from(JSON.stringify(j.encryptSafely({publicKey:o.c(h),data:P,version:"x25519-xsalsa20-poly1305"})),"utf8")),w(t),E("")}catch(n){w(""),E(n.message)}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){return M()}),[P,h]);var _=x?{encMsg:x,encPubKey:h}:{msg:P};return(0,c.jsxs)("div",{className:"mt-4 text-slate-300 space-y-2",children:[(0,c.jsx)("h1",{className:"text-center mb-12",children:"Encrypt Message"}),(0,c.jsx)(s.II,{label:"Public Key",value:h,onChange:function(e){return d(e.target.value)},children:(0,c.jsx)(s.zx,{onClick:function(){r.send("eth_getEncryptionPublicKey",[n]).then((function(e){d(i.Dv(o.J(e)))}))},children:"Request"})}),(0,c.jsx)(s.II,{label:"Message",spellCheck:!1,inputClassName:"overflow-scroll resize-y",value:P,onChange:function(e){return I(e.target.value)},type:"multiline"}),(0,c.jsx)(s.II,{label:"Encrypted Message",value:x,children:(0,c.jsx)(s.zx,{variant:"text",className:"py-1",disabled:!x&&!P,children:(0,c.jsx)(s.dL,{href:t.pathname+"?"+Object.entries(_).map((function(e){var t=g(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&"),children:(0,c.jsx)(p.G,{className:"fa-thin",icon:y.Xjp})})})}),N&&(0,c.jsx)("p",{className:"text-red-400",children:N})]})}function N(e){var t=(0,s.ti)(),n=(0,s.Mu)(),r=(0,u.useState)(""),i=r[0],o=r[1],f=(0,u.useState)(""),p=f[0],y=f[1],v=(0,u.useState)(""),h=v[0],d=v[1],b=(0,u.useState)(""),x=b[0],g=b[1];(0,u.useEffect)((function(){e.encMsg&&y(e.encMsg),e.decPrivKey&&d(e.decPrivKey)}),[e]);var w=function(){var e=m(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&h)try{t=j.decryptSafely({privateKey:(n=h,n.replace("0x","")),encryptedData:JSON.parse(l.ZN(p))}),g(t),o("")}catch(r){g(""),o(r.message)}else g(""),o("");case 1:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){return w()}),[p,h]);return(0,c.jsxs)("div",{className:"mt-4 text-slate-300 space-y-2",children:[(0,c.jsx)("h1",{className:"text-center mb-12",children:"Decrypt Message"}),(0,c.jsx)(s.II,{label:"Encrypted Message",spellCheck:!1,value:p,onChange:function(e){return y(e.target.value)}}),(0,c.jsx)(s.II,{label:"Private Key",spellCheck:!1,value:h,onChange:function(e){return d(e.target.value)},children:(0,c.jsx)(s.zx,{onClick:function(){var e;n.send("eth_decrypt",[(e=p,"0x"+e.replace("0x","")),t]).then((function(e){var t;return g(null===(t=JSON.parse(e))||void 0===t?void 0:t.data)})).catch((function(e){return o(e.message)}))},children:"Decrypt"})}),(0,c.jsx)(s.II,{label:"Decrypted Message",value:x}),i&&(0,c.jsx)("p",{className:"text-red-400",children:i})]})}}},function(e){e.O(0,[774,888,179],(function(){return t=82050,e(e.s=t);var t}));var t=e.O();_N_E=t}]);