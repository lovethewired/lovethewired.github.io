(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[175],{11954:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/abi-playground",function(){return n(1362)}])},1362:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return I},default:function(){return E}});var r=n(85893),a=n(67294),s=n(16605),i=n(19485),l=n(64146),c=n(84243),o=n(16441),u=n(61744),d=n(84109),f=n(94184),x=n.n(f),h=n(67814),p=n(51436),m=n(56024),v=n(41664);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return s}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=(0,a.useState)(),n=t[0],r=t[1],s=(0,a.useState)(),i=s[0],l=s[1],c=(0,a.useState)(e),o=c[0],u=c[1],d=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;l((function(){return t})),u(n)};return(0,a.useEffect)((function(){return n&&clearTimeout(n),r(setTimeout(i,o)),function(){return clearTimeout(n)}}),[i]),d}var S=function(e){return JSON.stringify(e,null,2)},I=!0;function E(){var e,t=(0,a.useState)(""),n=t[0],c=t[1],o=(0,a.useState)(""),u=o[0],f=o[1],m=(0,a.useState)(""),g=m[0],j=m[1],N=(0,a.useState)(""),w=N[0],I=N[1],E=(0,a.useState)(),A=E[0],_=E[1],T=(0,a.useState)(null),z=T[0],M=T[1],G=(0,d.VY)(),B=(0,s.pC)(),F=null===(e=(0,s.yw)())||void 0===e?void 0:e.getSigner(),L=C(1e3),P=(0,s.st)(u,B),R=(0,s.Gr)(u,B);return(0,a.useEffect)((function(){window.contract=null===A||void 0===A?void 0:A.connect(F)}),[A]),(0,a.useEffect)((function(){try{n&&f(i.getAddress(n))}catch(e){I(O(e))}}),[n]),(0,a.useEffect)((function(){L((function(){if(I(""),u&&g)try{var e=/^\[.+\]$/.test(g.replaceAll("\n","").trim())?g:g.split("\n").filter((function(e){return e.length>4})).map((function(e){return"function "+e.replace("function ","")}));_(new l.CH(u,e))}catch(t){I(O(t))}}))}),[g,u]),(0,r.jsxs)("div",{className:"content",children:[(0,r.jsxs)("h1",{className:"text-center mb-12",children:["ABI Playground",(0,r.jsxs)("span",{className:"group ml-4 text-lg text-primary-500/30",children:[(0,r.jsx)(h.G,{className:"",icon:p.Fuz}),(0,r.jsx)("div",{className:"hidden group-hover:inline-block absolute",children:(0,r.jsx)(s.zx,{className:"btn-light text-lg group normal-case",variant:"text",onClick:function(){c("0xBB9bc244D798123fDe783fCc1C72d3Bb8C189413"),j("daoCreator() view returns (address)\n\nunblockMe() returns (bool)\n\nsplitDao(uint256 proposalID, address newCurator) payable returns (bool success)\n\nproposals(uint256 id) view returns (address recipient, uint256 amount, string description, uint256 votingDeadline, bool open, bool proposalPassed, bytes32 proposalHash, uint256 proposalDeposit, bool newCurator, uint256 yea, uint256 nay, address creator)"),s.i8.activate(1).then((function(){return G("Make sure not to actually confirm any transactions on Mainnet!")})).then((function(){return G((0,r.jsx)(v.default,{href:"/blog/2022/abi-playground",children:"Read this post for more information"}),"info")}))},children:"Try an Example"})})]})]}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 items-start gap-4 text-slate-300",children:[(0,r.jsxs)("div",{className:"sm:order-1",children:[(0,r.jsxs)("div",{className:"flex sm:flex-col-reverse items-end gap-4",children:[(0,r.jsx)(s.II,{label:"Address",value:n,onChange:function(e){return c(e.target.value)},children:(0,r.jsx)(s.zx,{variant:"text",disabled:!P,children:(0,r.jsx)(s.dL,{href:P,children:(0,r.jsx)(h.G,{className:"fa-thin",icon:p.Xjp})})})}),(0,r.jsx)(s.II,{type:"select",className:"w-fit sm:w-full",label:"ChainId: "+B,value:B,onChange:function(e){return s.i8.activate(Number(e.target.value))},children:Object.entries(s.zG).map((function(e){var t=b(e,2),n=t[0],a=t[1].name;return(0,r.jsx)("option",{value:n,children:a},n)}))})]}),(0,r.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,r.jsx)("span",{className:"text-slate-400 px-2",children:"ABI"}),(0,r.jsxs)(s.zx,{className:x()("px-2",u&&"underline"),variant:"text",disabled:!u||!R,onClick:function(){return fetch(R).then((function(e){return e.json()})).then((function(e){if(console.log("Fetching from Etherscan",e),1!=e.status)I(e.message);else{var t=S(JSON.parse(e.result));""===t?I("Could not fetch ABI."):j(t)}}))},children:[(0,r.jsx)(h.G,{icon:p.DY})," Fetch"]}),(0,r.jsx)("div",{className:"flex",children:["ERC20","ERC721","ERC115"].map((function(e){return(0,r.jsx)(s.zx,{className:"px-2 py-0 text-sm",variant:"text",onClick:function(){return fetch("/data/".concat(e,"ABI.json")).then((function(e){return e.json()})).then((function(e){var t=S(e);""===t?I("Could not fetch ABI."):j(t)}))},children:e},e)}))})]}),(0,r.jsx)(s.II,{inputClassName:"overflow-scroll resize-y",value:g,onChange:function(e){return j(e.target.value)},type:"multiline"}),(0,r.jsx)("p",{className:"text-red-400 text-xs h-14",children:w&&"Error: "+w})]}),(0,r.jsx)(D,y({className:"sm:row-span-2 order-3 sm:order-2",address:u},z)),(0,r.jsxs)("div",{className:"sm:order-3 sm:col-span-2",children:[(0,r.jsx)("h2",{className:"mb-4",children:"Functions"}),A&&A.interface.fragments.filter((function(e){return"function"===e.type})).map((function(e,t){return(0,r.jsx)(k,y({iface:A.interface,setLLCData:M},e),t)}))]})]})]})}function k(e){var t=e.iface,n=e.setLLCData,i=e.name,l=e.inputs,o=e.constant,u=e.outputs,f=e.payable,m=(0,a.useState)([]),v=m[0],g=m[1],j=(0,a.useState)(""),y=j[0],b=j[1],w=(0,a.useState)([]),S=w[0],I=w[1],E=C(0),k=(0,s.HM)(),D=(0,s.yw)(),T=null===D||void 0===D?void 0:D.getSigner(),z=(0,d.VY)(),M=(0,d.mS)(),G=M.handleTx,B=M.handleTxError,F="".concat(i,"(").concat(l.map((function(e){return e.type})),")");(0,a.useEffect)((function(){I([]),b("")}),[JSON.stringify(u)]),(0,a.useEffect)((function(){g([])}),[JSON.stringify(l)]);var L=function(){try{var e=l.map((function(e,t){var n=e.type;return c.$.encode([n],[v[t]])})),r=t.getSighash(F);n({iface:t,fnId:F,inputs:l,encoded:e,sighash:r,outputs:u})}catch(a){b(O(a))}};(0,a.useEffect)((function(){b(""),v.length>0&&v.length===l.length&&v.every(Boolean)&&E(L)}),[v]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex text-center flex-wrap items-center gap-x-0 sm:gap-x-1 text-slate-500 text-xs sm:text-base",children:[(0,r.jsx)(s.zx,{variant:"text",className:"btn-light",onClick:L,children:(0,r.jsx)(h.G,{icon:p.DY})}),(0,r.jsx)(s.zx,{onClick:function(){var e,t;if(!k)return z("Must be connected via MetaMask!");o?(e=contract.connect(T).functions)[F].apply(e,N(v)).then(I).catch(B):(t=contract.connect(T).functions)[F].apply(t,N(v)).then(G).catch(B)},className:x()("px-0 pr-1 normal-case select-none max-w-[200px] text-ellipsis overflow-auto text-base",f?"text-red-400":o?"":"text-orange-300"),variant:"text",children:i}),(0,r.jsx)("span",{className:"font-thin text-xl",children:"("}),l.length>0&&l.map((function(e,t){var n=e.name,a=e.type;return(0,r.jsx)(s.II,{className:"text-slate-300 align-text-bottom basis-20 sm:basis-36 max-w-[200px] flex-grow leading-5",placeholder:a+(n?" "+n:""),value:v[t],onChange:function(e){return g(_(v,t,e.target.value))},children:"address"===a&&(0,r.jsx)("span",{className:"btn-light w-4 h-4 text-2xl sm:text-3xl ",onClick:function(){return g(_(v,t,k))},children:"*"})},t)})).reduce((function(e,t,n){return[e,(0,r.jsx)("span",{className:"sm:text-xl select-none",children:","},"c"+n),t]})),(0,r.jsx)("span",{className:"font-thin text-xl",children:")"}),u.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.G,{className:"fa-thin mx-2",icon:p.eFW}),u.map((function(e,t){var n=e.name,a=e.type;return(0,r.jsxs)("span",{className:"",children:[n," ",a]},t)})).reduce((function(e,t,n){return[e,(0,r.jsx)("span",{children:", "},"c"+n),t]}))]})]}),u.length>0&&S&&(0,r.jsx)(A,{responseDecoded:S,outputs:u}),(0,r.jsx)("p",{className:"text-red-400 text-xs h-4 overflow-x-scroll whitespace-nowrap",children:y})]})}function A(e){var t=e.responseDecoded,n=e.outputs,a=(0,s.pC)(),i=function(){var e=(0,d.VY)();return function(t){return navigator.clipboard.writeText(t).then((function(){return e("Copied!","info",1e3)}))}}();return(null===n||void 0===n?void 0:n.length)>0&&(null===t||void 0===t?void 0:t.length)===n.length&&(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("p",{className:"mt-4",children:["Response",(0,r.jsxs)(s.zx,{className:"normal-case",variant:"text",disabled:!(null===t||void 0===t?void 0:t.length)>0,onClick:function(){return i(c.$.encode(n,t))},children:[(0,r.jsx)(h.G,{className:"fa-thin mx-2",icon:m.kZ_}),"data"]})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"select-none mr-2 text-right",children:n.map((function(e,n){var a=e.type,s=e.name;return(0,r.jsx)("div",{className:"whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-slate-500 hover:text-slate-300 hover:cursor-pointer",onClick:function(){return i(t[n].toString())},children:a+(s?" "+s:"")})},n)}))}),(0,r.jsx)("div",{className:"overflow-scroll whitespace-nowrap",children:n.map((function(e,n){var i=e.type;return(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"block text-slate-300 h-6",children:"address"===i?(0,r.jsx)(s.dL,{className:"underline",href:(0,s.st)(t[n],a),children:t[n].toString()}):t[n].toString()})},n)}))})]})]})}var O=function(e){return e.message.replace(/, code.*(?=\))/,"")},_=function(e,t,n){var r=N(e);return r[t]=n,r};function D(e){var t,n,i=e.iface,l=e.address,c=e.fnId,f=e.inputs,h=e.outputs,p=e.encoded,m=e.sighash,v=e.className,g=(0,a.useState)(""),j=g[0],y=g[1],b=(0,a.useState)(""),w=b[0],C=b[1],S=(0,a.useState)(""),I=S[0],E=S[1],k=(0,d.mS)(),_=k.handleTx,D=k.handleTxError,T=(0,s.pC)(),z=(0,s.HM)(),M=(0,s.yw)(),G=(0,d.VY)(),B=(0,a.useState)([]),F=B[0],L=B[1],P=(0,a.useState)(""),R=(P[0],P[1]);(0,a.useEffect)((function(){m&&(null===p||void 0===p?void 0:p.length)>0&&y(m+"\n"+p.map((function(e){return e.slice(2)})).join("\n"))}),[p]),(0,a.useEffect)((function(){L([]);try{I&&c&&i&&L(i.decodeFunctionResult(c,I))}catch(e){R(O(e))}}),[c,I,i]);var Y=function(e){if(!z)return G("Must be connected via MetaMask!");var t="call"===e?"eth_call":"eth_sendTransaction",n=j.replaceAll("\n",""),r=w>0?o.Ou(u.fi(w)):"0x0",a=[{from:z,to:l,data:n,value:r},"latest"];"call"===e?M.send(t,a).then(E).catch(D):M.send(t,a).then((function(e){M.getTransaction(e).then(_).catch(D)}))};return(0,r.jsxs)("div",{className:x()("flex flex-col",v),children:[(0,r.jsx)("p",{children:"Low-Level Call"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(s.zx,{variant:"text",disabled:!l,onClick:function(){return Y("call")},children:"Call"}),(0,r.jsx)(s.zx,{variant:"text",disabled:!l,onClick:function(){return Y("send")},children:"Send"}),(0,r.jsx)(s.II,{value:w,onChange:function(e){return C(e.target.value)},inputClassName:"text-right",placeholder:"0.0",children:(0,r.jsx)("span",{className:"ml-1 text-slate-500",children:(null===(t=s.zG[T])||void 0===t||null===(n=t.nativeCurrency)||void 0===n?void 0:n.name)||"\u039e"})})]}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("p",{className:"font-bold",children:null!==c&&void 0!==c?c:"Data"}),(0,r.jsxs)("div",{className:"pt-2 text-xs md:text-base flex",children:[(null===f||void 0===f?void 0:f.length)>0&&(0,r.jsx)("div",{className:"flex flex-col text-right text-slate-400 select-none",children:[{type:"selector"}].concat(N(f)).map((function(e,t){e.name;var n=e.type;return(0,r.jsx)("span",{children:n},t)}))}),(0,r.jsx)(s.II,{type:"multiline",inputClassName:"whitespace-nowrap text-ellipsis overflow-auto pl-2 pb-2 min-h-[94px]",value:j,placeholder:"0x...",onChange:function(e){return y(e.target.value)}})]})]}),(0,r.jsx)(A,{responseDecoded:F,outputs:h})]})}}},function(e){e.O(0,[774,888,179],(function(){return t=11954,e(e.s=t);var t}));var t=e.O();_N_E=t}]);