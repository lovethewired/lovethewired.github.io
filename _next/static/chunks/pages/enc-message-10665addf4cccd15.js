(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{60149:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/enc-message",function(){return s(59205)}])},59205:function(e,t,s){"use strict";s.r(t),s.d(t,{Decrypt:function(){return m},Encrypt:function(){return v},default:function(){return g}});var a=s(85893),r=s(67294),n=s(84419),c=s(16441),l=s(59567),u=s(29251),i=s(11163),y=s(67814),d=s(51436),h=s(48764).Buffer;let o=s(51091),p=e=>e.replace("0x",""),x=e=>"0x"+e.replace("0x",""),f=e=>{if(!e.startsWith("0x"))try{return c.Dv(l.J(e))}catch(e){console.error(e.message)}return e};function g(){return(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)(v,{}),(0,a.jsx)(m,{})]})}function v(){let e=(0,i.useRouter)(),t=(0,n.ti)(),s=(0,n.Mu)(),[u,p]=(0,r.useState)(""),[x,g]=(0,r.useState)(""),[v,m]=(0,r.useState)(""),[j,N]=(0,r.useState)("");(0,r.useEffect)(()=>{e.query.msg&&N(e.query.msg),e.query.encMsg&&g(f(e.query.encMsg)),e.query.encPubKey&&p(e.query.encPubKey)},[e.query]);let b=async()=>{if(!j||!u){m(""),g("");return}try{let e=c.Dv(h.from(JSON.stringify(o.encryptSafely({publicKey:l.c(u),data:j,version:"x25519-xsalsa20-poly1305"})),"utf8"));g(e),m("")}catch(e){g(""),m(e.message)}};(0,r.useEffect)(()=>b(),[j,u]);let E=x?{encMsg:l.c(x),encPubKey:u}:{msg:j};return(0,a.jsxs)("div",{className:"mt-4 text-slate-300 space-y-2",children:[(0,a.jsx)("h1",{className:"text-center mb-12",children:"Encrypt Message"}),(0,a.jsx)(n.II,{label:"Public Key",value:u,onChange:e=>p(e.target.value),children:(0,a.jsx)(n.zx,{onClick:()=>{s.send("eth_getEncryptionPublicKey",[t]).then(e=>p(c.Dv(l.J(e))))},children:"Request"})}),(0,a.jsx)(n.II,{label:"Message",spellCheck:!1,inputClassName:"overflow-scroll resize-y",value:j,onChange:e=>N(e.target.value),type:"multiline"}),(0,a.jsx)(n.II,{label:"Encrypted Message",value:x,children:(0,a.jsx)(n.zx,{variant:"text",className:"py-1",disabled:!x&&!j,children:(0,a.jsx)(n.dL,{href:e.pathname+"?"+Object.entries(E).map(e=>{let[t,s]=e;return"".concat(t,"=").concat(s)}).join("&"),children:(0,a.jsx)(y.G,{className:"fa-thin",icon:d.Xjp})})})}),v&&(0,a.jsx)("p",{className:"text-red-400",children:v})]})}function m(){let e=(0,i.useRouter)(),t=(0,n.ti)(),s=(0,n.Mu)(),[c,l]=(0,r.useState)(""),[y,d]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[v,m]=(0,r.useState)("");(0,r.useEffect)(()=>{e.query.encMsg&&d(f(e.query.encMsg)),e.query.decPrivKey&&g(e.query.decPrivKey)},[e.query]);let j=async()=>{if(y&&h)try{let e=o.decryptSafely({privateKey:p(h),encryptedData:JSON.parse(u.ZN(y))});m(e),l("")}catch(e){m(""),l(e.message)}else m(""),l("")};return(0,r.useEffect)(()=>j(),[y,h]),(0,a.jsxs)("div",{className:"mt-4 text-slate-300 space-y-2",children:[(0,a.jsx)("h1",{className:"text-center mb-12",children:"Decrypt Message"}),(0,a.jsx)(n.II,{label:"Encrypted Message",spellCheck:!1,value:y,onChange:e=>d(e.target.value)}),(0,a.jsx)(n.II,{label:"Private Key",spellCheck:!1,value:h,onChange:e=>g(e.target.value),children:(0,a.jsx)(n.zx,{onClick:()=>{s.send("eth_decrypt",[x(y),t]).then(e=>{var t;return m(null===(t=JSON.parse(e))||void 0===t?void 0:t.data)}).catch(e=>l(e.message))},children:"Decrypt"})}),(0,a.jsx)(n.II,{label:"Decrypted Message",value:v}),c&&(0,a.jsx)("p",{className:"text-red-400",children:c})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=60149)}),_N_E=e.O()}]);