<!DOCTYPE html><html><head><meta charSet="utf-8"/><title class="animate__fadeIn">0xPhaze</title><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/27df22c263c92a70.css" as="style"/><link rel="stylesheet" href="/_next/static/css/27df22c263c92a70.css" data-n-g=""/><link rel="preload" href="/_next/static/css/65875c30e26bdd78.css" as="style"/><link rel="stylesheet" href="/_next/static/css/65875c30e26bdd78.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-ede13cf31a63337e.js" defer=""></script><script src="/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/_next/static/chunks/main-914fbfab4f90b52f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-37311da91e7d7479.js" defer=""></script><script src="/_next/static/chunks/175675d1-5e59763be147fa1f.js" defer=""></script><script src="/_next/static/chunks/634-e50698444ec43e1c.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-929d4139d643fc39.js" defer=""></script><script src="/_next/static/ohxe6tKj5m03eWYt1Ea6i/_buildManifest.js" defer=""></script><script src="/_next/static/ohxe6tKj5m03eWYt1Ea6i/_ssgManifest.js" defer=""></script><script src="/_next/static/ohxe6tKj5m03eWYt1Ea6i/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="app px-4 pb-20 min-h-screen flex flex-col items-center w-full max-w-screen"><header class="w-full flex flex-col px-4 sm:px-8 md:px-12 max-w-5xl sm:flex-row justify-between items-center border-white/20 overflow-hidden border-b p-4 h-16"><div class="w-full h-full flex flex-col sm:flex-row justify-start sm:justify-between items-center gap-y-4 overflow-hidden sm:overflow-visible"><div class="flex w-full sm:w-fit items-center"><h1 class="text-xl mx-auto font-display"><a href="/">0xPhaze</a></h1><div class="my-auto -ml-6 w-6 sm:hidden"><div class="text-slate-300 hover:text-secondary-400 transition-colors duration-200 cursor-pointer h-6"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"></path></svg></div></div></div><div class="flex flex-col sm:flex-row gap-x-8 md:gap-x-10 gap-y-4"><div class="flex gap-x-2 sm:gap-x-5 items-center justify-evenly"><a target="_blank" rel="noreferrer" class="link" href="https://github.com/0xPhaze/"><div><div class="text-slate-300 hover:text-secondary-400 transition-colors duration-200 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-4"><path style="fill:currentColor" d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0 1 12 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></div></div></a><a target="_blank" rel="noreferrer" class="link" href="https://twitter.com/lovethewired"><div><div class="text-slate-300 hover:text-secondary-400 transition-colors duration-200 cursor-pointer"><svg viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4"><path style="fill:currentColor" d="M15.584 1.578a7.91 7.91 0 0 1-1.57 1.807v.482c0 .965-.112 1.929-.336 2.772-.224.965-.673 1.808-1.121 2.652a17.373 17.373 0 0 1-1.794 2.29c-.785.723-1.681 1.205-2.578 1.566-1.01.362-2.13.603-3.252.603-1.793 0-3.475-.603-4.932-1.567h.784c1.458 0 2.915-.482 4.036-1.446a2.914 2.914 0 0 1-1.905-.723c-.561-.482-.897-.964-1.122-1.687h.561c.336 0 .56 0 .897-.12C2.579 8.085 1.907 7.603 1.458 7 .785 6.398.561 5.675.561 4.83c.449.242 1.01.362 1.458.483A5.531 5.531 0 0 1 .898 4.109C.673 3.626.449 3.024.449 2.42c0-.602.112-1.205.449-1.687a8.606 8.606 0 0 0 2.914 2.53c1.122.603 2.355.965 3.7 1.086 0-.241-.112-.483-.112-.844 0-.723.224-1.326.56-1.928.337-.603.897-.965 1.458-1.326.56-.241 1.233-.362 1.906-.12.672.12 1.233.481 1.681.964.673-.121 1.458-.362 2.018-.844-.224.844-.784 1.446-1.457 1.928.785-.12 1.457-.24 2.018-.602Z" fill="#081026"></path></svg></div></div></a><div><div class="text-slate-300 hover:text-secondary-400 transition-colors duration-200 cursor-pointer">ABI</div></div><div><div class="text-slate-300 hover:text-secondary-400 transition-colors duration-200 cursor-pointer">ENC</div></div></div><button class="rounded px-4 py-2 uppercase text-white select-none  transition-all duration-300 disabled:pointer-events-none bg-primary-600 hover:bg-primary-700  !outline-none normal-case text-sm w-[140px] w-36">Connect Wallet</button></div></div></header><main class="gap-y-20 mt-8 py-4 sm:px-8 md:px-12 w-full min-h-[500px] max-w-4xl"><div class="flex flex-col justify-between gap-y-20"><div class="content markdown"><h1 class="text-center">Hacks</h1><div class="mt-16"><h2 id="name-a-common-vulnerability"><a href="/knowledge/hacks#name-a-common-vulnerability"><span class="icon icon-link"></span></a>Name a common vulnerability.</h2>
<p><strong>Reentrancy:</strong></p>
<ul>
<li>program control is handed over to external contract (typically through ether transfers, but also flashloans)</li>
<li>prevented through re-entrancy guards, checks-effects-patterns</li>
</ul>
<p><strong>Uninitialized Implementation:</strong></p>
<ul>
<li>malicious takeover through calling <code>init()</code> on implementation contract</li>
<li>Parity-multisig hack: &quot;oops I killed it&quot;. Possible through general contract execution</li>
<li>Wormhole 10M$ bounty</li>
<li>bricked all proxies that pointed to implementation</li>
<li>prevented by calling <code>init()</code> on implementation</li>
<li>OZ <code>_disableInitializers()</code> in constructor prevents <code>init() initializer</code> functions from being called</li>
<li>other <code>initializer</code> modifiers that check <code>code.length</code></li>
</ul>
<h2 id="explain-a-recent-hack"><a href="/knowledge/hacks#explain-a-recent-hack"><span class="icon icon-link"></span></a>Explain a recent hack</h2>
<p><strong>Nomad&#x27;s</strong> cross-chain messaging protocol was attacked.</p>
<p>Initializer allows for setting a <code>_committedRoot</code> after which message tree&#x27;s history begins receiving updates and <code>confirmAt[_committedRoot]</code> is set to 1 so that message can be received and processed.
Due to upgrading Replica at same time as Home is deployed, home contains no messages and has merkle root <code>bytes32(0)</code> and thus <code>confirmAt[0] = 1</code>.</p>
<p>This allowed unproven messages that hash to 0 i.e. <code>messages[_messageHash] = 0</code> to be falsely processed.
Previously the status of a message had to be explicitly set. The update was introduced to prevent valid messages being blocked by invalid attestations.</p>
<p>Anyone could simply replay a malicious transaction.</p>
<p><strong>BNB Bridge</strong> IAVL tree hack. Multiple valid proofs generated by inserting empty nodes in the tree. Binance has a special precompile for verifying IAVL trees</p>
<p><strong>Transit Swap</strong> vulnerability due to unverified code and insufficient message checks that allowed arbitrary token transfers from users that gave permission.</p></div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"slug":["knowledge","hacks"],"contentRaw":"\n# Name a common vulnerability.\n\n**Reentrancy:**\n- program control is handed over to external contract (typically through ether transfers, but also flashloans)\n- prevented through re-entrancy guards, checks-effects-patterns\n\n**Uninitialized Implementation:**\n- malicious takeover through calling `init()` on implementation contract\n- Parity-multisig hack: \"oops I killed it\". Possible through general contract execution\n- Wormhole 10M$ bounty\n- bricked all proxies that pointed to implementation\n- prevented by calling `init()` on implementation\n- OZ `_disableInitializers()` in constructor prevents `init() initializer` functions from being called\n- other `initializer` modifiers that check `code.length`\n\n# Explain a recent hack\n\n**Nomad's** cross-chain messaging protocol was attacked.\n\nInitializer allows for setting a `_committedRoot` after which message tree's history begins receiving updates and `confirmAt[_committedRoot]` is set to 1 so that message can be received and processed.\nDue to upgrading Replica at same time as Home is deployed, home contains no messages and has merkle root `bytes32(0)` and thus `confirmAt[0] = 1`.\n\nThis allowed unproven messages that hash to 0 i.e. `messages[_messageHash] = 0` to be falsely processed.\nPreviously the status of a message had to be explicitly set. The update was introduced to prevent valid messages being blocked by invalid attestations.\n\nAnyone could simply replay a malicious transaction.\n\n**BNB Bridge** IAVL tree hack. Multiple valid proofs generated by inserting empty nodes in the tree. Binance has a special precompile for verifying IAVL trees\n\n**Transit Swap** vulnerability due to unverified code and insufficient message checks that allowed arbitrary token transfers from users that gave permission.\n","title":"Hacks","date":"Invalid Date"}},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["knowledge","hacks"]},"buildId":"ohxe6tKj5m03eWYt1Ea6i","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>